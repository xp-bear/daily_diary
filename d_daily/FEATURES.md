# 每日日记 - 功能清单

## ✅ 已完成功能

### 1. 用户认证模块
- ✅ 用户注册（支持用户名、昵称、邮箱、手机号）
- ✅ 用户登录（支持记住密码）
- ✅ 自动登录检测
- ✅ 退出登录
- ✅ JWT Token 认证
- ✅ 密码加密存储（bcrypt）

### 2. 日记核心功能
- ✅ 日历视图展示
  - 按月份切换
  - 今天快速跳转
  - 标记有日记的日期
  - 选择日期查看
- ✅ 写日记
  - 富文本内容编辑
  - 心情选择（8种心情）
  - 天气选择（8种天气）
  - 图片上传（最多9张）
  - 视频上传（最多9个）
  - 字数统计（最大5000字）
- ✅ 查看日记详情
  - 完整内容显示
  - 图片预览（支持压缩和原图切换）
  - 视频播放（支持封面预览）
  - 最后编辑时间显示
- ✅ 编辑日记
  - 修改已有日记
  - 更新图片和视频
- ✅ 删除日记
  - 确认提示
  - 自动删除OSS文件

### 3. 日记管理功能
- ✅ 日记列表查看
  - 按时间倒序显示
  - 年份筛选
  - 月份筛选
  - 心情筛选
  - 日记预览（内容截断）
  - 图片缩略图显示
- ✅ 日记搜索
  - 关键词搜索
  - 搜索结果高亮
  - 搜索结果统计
- ✅ 数据统计
  - 记录天数统计
  - 总字数统计
  - 连续记录天数
  - 日均字数
  - 心情分布图表
  - 天气分布统计
  - 月度日记数量柱状图

### 4. 用户中心功能
- ✅ 用户信息展示
  - 昵称、用户名显示
  - 头像emoji显示
- ✅ 统计数据展示
  - 总天数
  - 连续天数
  - 总字数
- ✅ 功能菜单
  - 全部日记（跳转列表页）
  - 搜索日记（跳转搜索页）
  - 心情统计（跳转统计页）
  - 编辑资料 ✅
  - 修改密码（待开发）
  - 写日记提醒 ✅
  - 备份与恢复 ✅
  - 关于应用
- ✅ 退出登录
- ✅ 编辑个人资料
  - 修改昵称
  - 修改邮箱
  - 修改手机号
  - 更换头像
  - 表单验证
- ✅ 写日记提醒
  - 自定义提醒时间
  - 星期重复设置
  - 多种提醒方式（通知、震动、提示音）
  - 提醒文案选择
  - 开关控制
- ✅ 备份与恢复
  - 导出日记到本地（JSON格式）
  - 从备份文件恢复数据
  - 备份历史记录管理
  - 自动备份设置
  - 备份频率配置
  - 备份数量限制

### 5. 文件上传功能
- ✅ 阿里云OSS集成
  - 图片上传
  - 视频上传
  - 文件压缩
  - 批量删除
  - URL生成
- ✅ 图片处理
  - 自动压缩
  - 质量控制
  - 格式转换（WebP）
- ✅ 视频处理
  - 封面截图生成
  - 播放优化

### 6. 数据存储
- ✅ MySQL数据库
  - 用户表（users）
  - 日记表（diaries）
  - 外键关联
  - 唯一索引
- ✅ 本地存储
  - Token缓存
  - 用户信息缓存
  - 记住密码功能

## 🎨 界面设计
- ✅ 现代化渐变色设计（蓝紫色主题）
- ✅ 卡片式布局
- ✅ 流畅的动画效果
- ✅ Emoji图标使用
- ✅ 响应式设计
- ✅ 统一的交互反馈

## 📱 页面列表

### 已完成页面
1. **登录页** (`/pages/login/login`) ✅
2. **注册页** (`/pages/register/register`) ✅
3. **首页/日历页** (`/pages/index/index`) ✅
4. **写日记页** (`/pages/write/write`) ✅
5. **日记详情页** (`/pages/detail/detail`) ✅
6. **日记列表页** (`/pages/list/list`) ✅
7. **搜索页** (`/pages/search/search`) ✅
8. **统计页** (`/pages/stats/stats`) ✅
9. **我的页面** (`/pages/mine/mine`) ✅
10. **编辑资料页** (`/pages/profile/profile`) ✅
11. **写日记提醒页** (`/pages/reminder/reminder`) ✅
12. **备份与恢复页** (`/pages/backup/backup`) ✅

## 🔧 技术栈

### 前端
- uni-app（支持多端发布）
- Vue.js 2.x
- uni-ui组件库
- 阿里云OSS SDK

### 后端
- Node.js
- Koa2框架
- MySQL数据库
- JWT身份认证
- Bcrypt密码加密
- 阿里云OSS

## 📦 待优化功能

### 近期计划
- ✅ 编辑用户资料功能
- ⏳ 修改密码功能（完整流程）
- ✅ 写日记提醒（推送通知）
- ✅ 数据备份与恢复
- ⏳ 日记导出（PDF/图片）
- ⏳ 主题切换（深色模式）
- ⏳ 更多心情和天气选项

### 长期规划
- 标签系统
- 日记分类
- 天气自动获取
- 位置记录
- 分享功能
- 语音记录
- 手写输入
- 云同步优化

## 🚀 部署说明

### 后端部署
1. 配置MySQL数据库
2. 配置阿里云OSS（可选）
3. 设置环境变量（.env文件）
4. 安装依赖：`npm install`
5. 启动服务：`npm start`

### 前端部署
1. 配置API地址（utils/config.js）
2. 安装依赖：`npm install`
3. 编译运行：
   - H5: `npm run dev:h5`
   - 微信小程序: `npm run dev:mp-weixin`
   - APP: `npm run dev:app`

## 📝 注意事项

### TabBar图标
项目中tabBar需要以下图标文件（需自行准备）：
- `static/calendar.png` - 日历图标（未选中）
- `static/calendar-active.png` - 日历图标（选中）
- `static/mine.png` - 我的图标（未选中）
- `static/mine-active.png` - 我的图标（选中）

建议尺寸：81px × 81px，格式：PNG

### 数据库配置
确保MySQL服务运行，并配置正确的连接信息。

### OSS配置
如需使用文件上传功能，需配置阿里云OSS：
- Bucket名称
- AccessKey ID
- AccessKey Secret
- 区域（Region）

详见：`server/config/oss.js` 和 `OSS集成说明.md`

## ✨ 特色功能

1. **智能日历标记** - 自动标记有日记的日期
2. **连续记录统计** - 激励用户坚持写日记
3. **多媒体支持** - 支持图片和视频记录
4. **关键词搜索** - 快速找到历史日记
5. **数据可视化** - 直观的统计图表
6. **离线缓存** - 优化加载速度
7. **响应式设计** - 适配多种屏幕

## 📊 数据统计功能详情

### 基础统计
- 记录天数：总共写了多少天日记
- 总字数：累计写了多少字
- 连续天数：连续记录的天数
- 日均字数：平均每天写多少字

### 心情分析
- 心情分布饼图
- 各种心情的次数和占比
- 心情趋势分析

### 天气记录
- 天气类型统计
- 各种天气出现次数

### 时间分布
- 月度日记数量柱状图
- 记录活跃度分析

## 🔐 安全特性

- 密码bcrypt加密存储
- JWT Token认证机制
- Token过期自动跳转登录
- SQL注入防护
- XSS攻击防护
- 用户数据隔离

## 📱 支持平台

- ✅ H5
- ✅ 微信小程序
- ✅ Android APP
- ✅ iOS APP
- ✅ 支付宝小程序
- ✅ 百度小程序
- ✅ 字节跳动小程序

---

**版本**: v1.0.0  
**最后更新**: 2025-12-31
