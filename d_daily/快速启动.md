# 🚀 每日日记 - 5分钟快速启动指南

## 第一步：准备环境

### 必需环境
- ✅ Node.js (v14+)
- ✅ MySQL数据库 (v5.7+)
- ⚠️ 阿里云OSS（可选，图片视频上传需要）

### 检查环境
```bash
node -v        # 检查Node.js版本
mysql --version # 检查MySQL版本
```

## 第二步：启动后端服务（必需）

### 1. 进入后端目录
```bash
cd server
```

### 2. 安装依赖
```bash
npm install
```

### 3. 配置数据库
编辑 `server/.env` 文件：
```env
# 修改这三行为你的MySQL配置
DB_HOST=localhost
DB_USER=root
DB_PASSWORD=你的MySQL密码

# 其他配置保持默认即可
DB_PORT=3306
DB_NAME=daily_diary
PORT=3000
JWT_SECRET=your_jwt_secret_key_change_this_in_production
JWT_EXPIRES_IN=7d
```

### 4. 启动服务
```bash
npm start
```

看到以下输出表示成功：
```
════════════════════════════════════════
  📝 每日日记后端服务启动成功！
════════════════════════════════════════
  🌐 本地访问: http://localhost:3000
  ...
```

### 5. 验证服务
打开浏览器访问：http://localhost:3000/health

看到以下响应表示成功：
```json
{
  "code": 200,
  "message": "Server is running",
  "data": {
    "status": "ok",
    "database": "connected"
  }
}
```

## 第三步：启动前端应用

### 1. 打开新终端，回到项目根目录
```bash
cd ..  # 如果在server目录，先回到根目录
```

### 2. 安装依赖
```bash
npm install
```

### 3. 配置API地址
编辑 `utils/config.js`：
```javascript
// 如果是本机测试，保持默认
export const API_BASE_URL = 'http://localhost:3000/api';

// 如果是真机调试，改为你的电脑IP
// export const API_BASE_URL = 'http://192.168.1.xxx:3000/api';
```

**如何获取电脑IP？**
- Windows: 运行 `ipconfig`，查看IPv4地址
- Mac/Linux: 运行 `ifconfig`，查看inet地址

### 4. 启动应用

#### 方式一：H5网页版（推荐新手）
```bash
npm run dev:h5
```
启动后会自动打开浏览器，通常地址是：http://localhost:8080

#### 方式二：微信小程序
```bash
npm run dev:mp-weixin
```
然后用微信开发者工具打开 `dist/dev/mp-weixin` 目录

#### 方式三：APP（需要HBuilderX）
1. 用HBuilderX打开项目
2. 点击"运行" → "运行到手机或模拟器"

## 第四步：开始使用

### 1. 注册账号
- 打开应用，点击"立即注册"
- 填写信息：
  - 用户名：test123（6-20位字母数字）
  - 昵称：测试用户
  - 密码：123456（至少6位）
- 点击"注册"

### 2. 写第一篇日记
- 注册成功后自动登录
- 点击右下角的"✏️"按钮
- 选择心情和天气
- 输入日记内容
- 点击"保存"

### 3. 查看日记
- 在首页日历中看到今天有标记
- 点击日期查看日记预览
- 点击"查看详情"查看完整内容

### 4. 探索更多功能
- 📚 全部日记：查看所有日记列表
- 🔍 搜索日记：搜索关键词
- 📊 心情统计：查看数据图表

## 常见问题快速解决

### ❌ 后端启动失败
**问题**: `Error: connect ECONNREFUSED`
**解决**: 
1. 检查MySQL服务是否启动
2. 检查`.env`中的数据库密码是否正确
3. 确保MySQL用户有创建数据库的权限

### ❌ 前端连接不上后端
**问题**: `网络连接失败`
**解决**:
1. 确认后端服务已启动（访问 http://localhost:3000/health）
2. 检查`utils/config.js`中的API地址配置
3. 如果是真机调试，使用电脑IP而不是localhost

### ❌ 登录/注册失败
**问题**: `请求失败`
**解决**:
1. 打开浏览器控制台查看错误信息
2. 确认后端服务正常运行
3. 检查网络请求是否发送成功

### ❌ 图片上传失败
**问题**: 上传图片时提示失败
**解决**:
1. 如果没有配置OSS，暂时不支持图片上传
2. 配置OSS：编辑`server/config/oss.js`
3. 或者先使用文字记录日记

## 📱 真机调试步骤

### Android手机
1. 手机和电脑连接同一WiFi
2. 修改API地址为电脑IP：`http://192.168.1.xxx:3000/api`
3. 编译运行：`npm run dev:h5`
4. 手机浏览器访问：`http://192.168.1.xxx:8080`

### iOS手机
1. 使用HBuilderX打开项目
2. 修改API地址为电脑IP
3. 连接iPhone
4. 点击"运行" → "运行到iOS设备"

## 🎯 下一步做什么？

### 继续开发
- 查看 `开发完成总结.md` 了解项目详情
- 查看 `FEATURES.md` 了解完整功能
- 修改代码实现个性化需求

### 学习使用
- 查看 `使用说明.md` 了解所有功能
- 尝试写日记、上传图片
- 查看统计数据

### 部署上线
- 购买服务器和域名
- 配置生产环境数据库
- 部署后端服务
- 发布前端应用

## 🆘 需要帮助？

### 查看文档
- `README.md` - 项目简介
- `使用说明.md` - 功能使用
- `开发完成总结.md` - 技术详情
- `server/README.md` - 后端API文档

### 检查日志
- 后端日志：终端输出
- 前端日志：浏览器控制台（F12）

### 常用命令
```bash
# 后端
cd server
npm start           # 启动服务
npm run dev         # 开发模式（自动重启）

# 前端
npm run dev:h5           # H5版本
npm run dev:mp-weixin    # 微信小程序
npm run build:h5         # 打包H5
```

---

## ✅ 成功启动检查清单

- [ ] MySQL数据库已启动
- [ ] 后端服务已启动（http://localhost:3000/health 可访问）
- [ ] 前端应用已启动
- [ ] 可以正常注册登录
- [ ] 可以写日记并保存

如果以上都完成，恭喜你！🎉 可以开始使用了！

---

**提示**: 首次启动可能需要10-30秒时间来创建数据库和表，请耐心等待。
